read_data       ${fname}
read_data       lammpsD8-1.xyz
  orthogonal box = (0 0 0) to (11.5 11.5 11.5)
  1 by 1 by 1 MPI processor grid
  reading atoms ...
  96 atoms
change_box 	all triclinic
  triclinic box = (0 0 0) to (11.5 11.5 11.5) with tilt (0 0 0)

include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Compute initial state
fix 3 all box/relax  aniso 0.0
minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 5.911 | 5.911 | 5.911 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
       0            0   -675.97111    121623.17    121623.17    121623.17    121623.17    73.231647    73.231647    73.231647         11.5         11.5         11.5     1520.875 
     500            0   -695.00386    269.31855    269.31855    269.31855    269.31855   0.32541783   0.32541783   0.32541783    11.721099    11.721099    11.721099    1610.2932 
     963            0   -695.27305 -2.9370323e-09 -4.0713633e-09 5.6992465e-10 -5.3096582e-09 -6.5027034e-09 -4.8931408e-09 -6.1901498e-09    11.724557    11.724557    11.724557    1611.7192 
Loop time of 0.296561 on 1 procs for 963 steps with 96 atoms

99.5% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
        -675.971106367     -695.273050677     -695.273050677
  Force two-norm initial, final = 216.828 7.19559e-11
  Force max component initial, final = 115.451 1.29723e-11
  Final line search alpha, max atom move = 1 1.29723e-11
  Iterations, force evaluations = 963 1156

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.27592    | 0.27592    | 0.27592    |   0.0 | 93.04
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.0039773  | 0.0039773  | 0.0039773  |   0.0 |  1.34
Output  | 0.00013375 | 0.00013375 | 0.00013375 |   0.0 |  0.05
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.01653    |            |       |  5.57

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7848 ave 7848 max 7848 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7848
Ave neighs/atom = 81.75
Neighbor list builds = 0
Dangerous builds = 0

#dump rel all xyz 10 relaxed-*.xyz
#dump 3 all xyz 10 relaxed.xyz
#dump 3 all atom 10 dump.atom

variable tmp equal pxx
variable pxx0 equal ${tmp}
variable pxx0 equal -4.07136332487662e-09
variable tmp equal pyy
variable pyy0 equal ${tmp}
variable pyy0 equal 5.69924646507532e-10
variable tmp equal pzz
variable pzz0 equal ${tmp}
variable pzz0 equal -5.30965816101421e-09
variable tmp equal pyz
variable pyz0 equal ${tmp}
variable pyz0 equal -6.19014980118406e-09
variable tmp equal pxz
variable pxz0 equal ${tmp}
variable pxz0 equal -4.89314080704066e-09
variable tmp equal pxy
variable pxy0 equal ${tmp}
variable pxy0 equal -6.50270336410221e-09

variable tmp equal lx
variable lx0 equal ${tmp}
variable lx0 equal 11.7245574973305
variable tmp equal ly
variable ly0 equal ${tmp}
variable ly0 equal 11.7245574973302
variable tmp equal lz
variable lz0 equal ${tmp}
variable lz0 equal 11.7245574973302

# These formulas define the derivatives w.r.t. strain components
# Constants uses $, variables use v_
variable d1 equal -(v_pxx1-${pxx0})/(v_delta/v_len0)*${cfac}
variable d1 equal -(v_pxx1--4.07136332487662e-09)/(v_delta/v_len0)*${cfac}
variable d1 equal -(v_pxx1--4.07136332487662e-09)/(v_delta/v_len0)*0.0001
variable d2 equal -(v_pyy1-${pyy0})/(v_delta/v_len0)*${cfac}
variable d2 equal -(v_pyy1-5.69924646507532e-10)/(v_delta/v_len0)*${cfac}
variable d2 equal -(v_pyy1-5.69924646507532e-10)/(v_delta/v_len0)*0.0001
variable d3 equal -(v_pzz1-${pzz0})/(v_delta/v_len0)*${cfac}
variable d3 equal -(v_pzz1--5.30965816101421e-09)/(v_delta/v_len0)*${cfac}
variable d3 equal -(v_pzz1--5.30965816101421e-09)/(v_delta/v_len0)*0.0001
variable d4 equal -(v_pyz1-${pyz0})/(v_delta/v_len0)*${cfac}
variable d4 equal -(v_pyz1--6.19014980118406e-09)/(v_delta/v_len0)*${cfac}
variable d4 equal -(v_pyz1--6.19014980118406e-09)/(v_delta/v_len0)*0.0001
variable d5 equal -(v_pxz1-${pxz0})/(v_delta/v_len0)*${cfac}
variable d5 equal -(v_pxz1--4.89314080704066e-09)/(v_delta/v_len0)*${cfac}
variable d5 equal -(v_pxz1--4.89314080704066e-09)/(v_delta/v_len0)*0.0001
variable d6 equal -(v_pxy1-${pxy0})/(v_delta/v_len0)*${cfac}
variable d6 equal -(v_pxy1--6.50270336410221e-09)/(v_delta/v_len0)*${cfac}
variable d6 equal -(v_pxy1--6.50270336410221e-09)/(v_delta/v_len0)*0.0001

displace_atoms all random ${atomjiggle} ${atomjiggle} ${atomjiggle} 87287 units box
displace_atoms all random 1e-05 ${atomjiggle} ${atomjiggle} 87287 units box
displace_atoms all random 1e-05 1e-05 ${atomjiggle} 87287 units box
displace_atoms all random 1e-05 1e-05 1e-05 87287 units box

# Write restart
unfix 3
write_restart restart.equil

# uxx Perturbation

variable dir equal 1
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
#
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
variable len0 equal ${lx0}
variable len0 equal 11.7245574973305
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  96 atoms
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1.0e-5*${len0}
variable delta equal -1.0e-5*11.7245574973305
variable deltaxy equal -${up}*xy
variable deltaxy equal -1.0e-5*xy
variable deltaxz equal -${up}*xz
variable deltaxz equal -1.0e-5*xz
variable deltayz equal -${up}*yz
variable deltayz equal -1.0e-5*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box
change_box all x delta 0 -0.000117245574973305 xy delta ${deltaxy} xz delta ${deltaxz} remap units box
change_box all x delta 0 -0.000117245574973305 xy delta -0 xz delta ${deltaxz} remap units box
change_box all x delta 0 -0.000117245574973305 xy delta -0 xz delta -0 remap units box
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6122 11.6123 11.6123) with tilt (0 0 0)
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6122 11.6123 11.6123) with tilt (0 0 0)
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6122 11.6123 11.6123) with tilt (0 0 0)
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 4.897 | 4.897 | 4.897 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     963            0   -695.27305    13.745848    26.697245    7.8077243    6.7325732    1.1943874    1.3521733   0.50603202     11.72444    11.724557    11.724557    1611.7031 
    1000            0   -695.27305    13.380388    22.043001    9.0486005    9.0495639 0.0030268414 0.00095558711 -0.001055993     11.72444    11.724557    11.724557    1611.7031 
    1062            0   -695.27305    13.379879    22.042926    9.0483552    9.0483552 7.3164532e-08 9.2283687e-09 6.3670623e-08     11.72444    11.724557    11.724557    1611.7031 
Loop time of 0.0550399 on 1 procs for 99 steps with 96 atoms

90.3% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
        -695.273050305     -695.273050566     -695.273050566
  Force two-norm initial, final = 0.00683959 9.45703e-11
  Force max component initial, final = 0.00131277 1.6512e-11
  Final line search alpha, max atom move = 1 1.6512e-11
  Iterations, force evaluations = 99 198

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.053422   | 0.053422   | 0.053422   |   0.0 | 97.06
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.00080538 | 0.00080538 | 0.00080538 |   0.0 |  1.46
Output  | 5.4121e-05 | 5.4121e-05 | 5.4121e-05 |   0.0 |  0.10
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0007579  |            |       |  1.38

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7056 ave 7056 max 7056 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7056
Ave neighs/atom = 73.5
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 22.0429262976833
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 9.04835522664582
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 9.04835522557008
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 7.31645322283301e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 9.22836866679546e-09
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 6.36706228155971e-08

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 220.429263017547
variable C2neg equal ${d2}
variable C2neg equal 90.4835522607589
variable C3neg equal ${d3}
variable C3neg equal 90.4835523087974
variable C4neg equal ${d4}
variable C4neg equal 6.98607726167812e-07
variable C5neg equal ${d5}
variable C5neg equal 1.41215094738361e-07
variable C6neg equal ${d6}
variable C6neg equal 7.96672355924323e-07

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  96 atoms
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1.0e-5*${len0}
variable delta equal 1.0e-5*11.7245574973305
variable deltaxy equal ${up}*xy
variable deltaxy equal 1.0e-5*xy
variable deltaxz equal ${up}*xz
variable deltaxz equal 1.0e-5*xz
variable deltayz equal ${up}*yz
variable deltayz equal 1.0e-5*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box
change_box all x delta 0 0.000117245574973305 xy delta ${deltaxy} xz delta ${deltaxz} remap units box
change_box all x delta 0 0.000117245574973305 xy delta 0 xz delta ${deltaxz} remap units box
change_box all x delta 0 0.000117245574973305 xy delta 0 xz delta 0 remap units box
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6124 11.6123 11.6123) with tilt (0 0 0)
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6124 11.6123 11.6123) with tilt (0 0 0)
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6124 11.6123 11.6123) with tilt (0 0 0)
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 4.897 | 4.897 | 4.897 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     963            0   -695.27305   -13.730003   -28.053923   -6.0304508   -7.1056359    1.1941777    1.3520749   0.50593491    11.724675    11.724557    11.724557    1611.7353 
    1000            0   -695.27305   -13.379889   -22.041544   -9.0494341   -9.0486875 0.0026150169 0.00082664016 -0.0011037659    11.724675    11.724557    11.724557    1611.7353 
    1062            0   -695.27305   -13.379189   -22.041948   -9.0478093   -9.0478093 3.516369e-08 -8.4282669e-09 4.3072805e-08    11.724675    11.724557    11.724557    1611.7353 
Loop time of 0.0472448 on 1 procs for 99 steps with 96 atoms

99.3% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
        -695.273050292     -695.273050566     -695.273050566
  Force two-norm initial, final = 0.00710169 9.64282e-11
  Force max component initial, final = 0.00106678 2.01524e-11
  Final line search alpha, max atom move = 1 2.01524e-11
  Iterations, force evaluations = 99 198

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.045919   | 0.045919   | 0.045919   |   0.0 | 97.19
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.0006845  | 0.0006845  | 0.0006845  |   0.0 |  1.45
Output  | 2.8849e-05 | 2.8849e-05 | 2.8849e-05 |   0.0 |  0.06
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0006125  |            |       |  1.30

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7056 ave 7056 max 7056 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7056
Ave neighs/atom = 73.5
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -695.273050565851
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal -13.3791888639956
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal -22.0419479119238
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal -9.04780934219997
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal -9.04780933786311
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 3.51636900307302e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal -8.42826688009015e-09
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 4.3072805336811e-08

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal 220.419479078524
variable C2pos equal ${d2}
variable C2pos equal 90.478093427699
variable C3pos equal ${d3}
variable C3pos equal 90.4780933255345
variable C4pos equal ${d4}
variable C4pos equal -4.92629551379951e-07
variable C5pos equal ${d5}
variable C5pos equal 3.53512607304949e-08
variable C6pos equal ${d6}
variable C6pos equal -4.16663933948324e-07

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C11 equal 0.5*(${C1neg}+${C1pos})
variable C11 equal 0.5*(220.429263017547+${C1pos})
variable C11 equal 0.5*(220.429263017547+220.419479078524)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C21 equal 0.5*(${C2neg}+${C2pos})
variable C21 equal 0.5*(90.4835522607589+${C2pos})
variable C21 equal 0.5*(90.4835522607589+90.478093427699)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C31 equal 0.5*(${C3neg}+${C3pos})
variable C31 equal 0.5*(90.4835523087974+${C3pos})
variable C31 equal 0.5*(90.4835523087974+90.4780933255345)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C41 equal 0.5*(${C4neg}+${C4pos})
variable C41 equal 0.5*(6.98607726167812e-07+${C4pos})
variable C41 equal 0.5*(6.98607726167812e-07+-4.92629551379951e-07)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C51 equal 0.5*(${C5neg}+${C5pos})
variable C51 equal 0.5*(1.41215094738361e-07+${C5pos})
variable C51 equal 0.5*(1.41215094738361e-07+3.53512607304949e-08)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C61 equal 0.5*(${C6neg}+${C6pos})
variable C61 equal 0.5*(7.96672355924323e-07+${C6pos})
variable C61 equal 0.5*(7.96672355924323e-07+-4.16663933948324e-07)

# Delete dir to make sure it is not reused

variable dir delete

# uyy Perturbation

variable dir equal 2
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
#
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
variable len0 equal ${ly0}
variable len0 equal 11.7245574973302
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  96 atoms
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1.0e-5*${len0}
variable delta equal -1.0e-5*11.7245574973302
variable deltaxy equal -${up}*xy
variable deltaxy equal -1.0e-5*xy
variable deltaxz equal -${up}*xz
variable deltaxz equal -1.0e-5*xz
variable deltayz equal -${up}*yz
variable deltayz equal -1.0e-5*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box
change_box all y delta 0 -0.000117245574973302 yz delta ${deltayz} remap units box
change_box all y delta 0 -0.000117245574973302 yz delta -0 remap units box
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6122 11.6123) with tilt (0 0 0)
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6122 11.6123) with tilt (0 0 0)
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 4.897 | 4.897 | 4.897 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     963            0   -695.27305    13.745918    6.2401758    28.264959    6.7326184    1.1943656    1.3521075    0.5059169    11.724557     11.72444    11.724557    1611.7031 
    1000            0   -695.27305    13.380395    9.0492093    22.042352    9.0496234 0.0026179987 0.0008730463 -0.0010709786    11.724557     11.72444    11.724557    1611.7031 
    1062            0   -695.27305    13.379879    9.0483552    22.042926    9.0483552 3.469909e-08 -1.7525248e-08 4.1554147e-08    11.724557     11.72444    11.724557    1611.7031 
Loop time of 0.0488708 on 1 procs for 99 steps with 96 atoms

99.2% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
         -695.27305029     -695.273050566     -695.273050566
  Force two-norm initial, final = 0.00704907 9.24433e-11
  Force max component initial, final = 0.00111279 1.99625e-11
  Final line search alpha, max atom move = 1 1.99625e-11
  Iterations, force evaluations = 99 198

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.047523   | 0.047523   | 0.047523   |   0.0 | 97.24
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.00066924 | 0.00066924 | 0.00066924 |   0.0 |  1.37
Output  | 3.6001e-05 | 3.6001e-05 | 3.6001e-05 |   0.0 |  0.07
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0006423  |            |       |  1.31

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7056 ave 7056 max 7056 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7056
Ave neighs/atom = 73.5
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 9.04835518452019
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 22.0429263474977
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 9.04835523440499
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 3.46990899928302e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal -1.75252477676256e-08
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 4.15541468555359e-08

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 90.4835518859155
variable C2neg equal ${d2}
variable C2neg equal 220.429263469278
variable C3neg equal ${d3}
variable C3neg equal 90.4835523971465
variable C4neg equal ${d4}
variable C4neg equal 4.77442966567199e-07
variable C5neg equal ${d5}
variable C5neg equal -1.26321069605849e-07
variable C6neg equal ${d6}
variable C6neg equal 4.12017933569324e-07

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  96 atoms
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1.0e-5*${len0}
variable delta equal 1.0e-5*11.7245574973302
variable deltaxy equal ${up}*xy
variable deltaxy equal 1.0e-5*xy
variable deltaxz equal ${up}*xz
variable deltaxz equal 1.0e-5*xz
variable deltayz equal ${up}*yz
variable deltayz equal 1.0e-5*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box
change_box all y delta 0 0.000117245574973302 yz delta ${deltayz} remap units box
change_box all y delta 0 0.000117245574973302 yz delta 0 remap units box
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6124 11.6123) with tilt (0 0 0)
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6124 11.6123) with tilt (0 0 0)
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 4.897 | 4.897 | 4.897 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     963            0   -695.27305   -13.730073   -7.5979677   -26.486567   -7.1056844     1.194204    1.3521379   0.50604847    11.724557    11.724675    11.724557    1611.7353 
    1000            0   -695.27305   -13.379913   -9.0492727   -22.042446   -9.0480198  0.003055747 0.00077037212 -0.0010350053    11.724557    11.724675    11.724557    1611.7353 
    1062            0   -695.27305   -13.379189   -9.0478094   -22.041948   -9.0478093 7.0827108e-08 1.0903949e-08 6.2592198e-08    11.724557    11.724675    11.724557    1611.7353 
Loop time of 0.046993 on 1 procs for 99 steps with 96 atoms

99.6% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
        -695.273050307     -695.273050566     -695.273050566
  Force two-norm initial, final = 0.00689385 9.06043e-11
  Force max component initial, final = 0.0011957 1.5655e-11
  Final line search alpha, max atom move = 1 1.5655e-11
  Iterations, force evaluations = 99 198

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.045692   | 0.045692   | 0.045692   |   0.0 | 97.23
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.00066519 | 0.00066519 | 0.00066519 |   0.0 |  1.42
Output  | 3.6001e-05 | 3.6001e-05 | 3.6001e-05 |   0.0 |  0.08
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0005999  |            |       |  1.28

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7056 ave 7056 max 7056 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7056
Ave neighs/atom = 73.5
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -695.273050565851
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal -13.379188860373
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal -9.04780936674952
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal -22.0419478728856
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal -9.04780934148371
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 7.08271075969864e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 1.09039488758761e-08
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 6.25921981908895e-08

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal 90.4780936267816
variable C2pos equal ${d2}
variable C2pos equal 220.419478734555
variable C3pos equal ${d3}
variable C3pos equal 90.4780933617405
variable C4pos equal ${d4}
variable C4pos equal -6.87823479920736e-07
variable C5pos equal ${d5}
variable C5pos equal -1.57970896829168e-07
variable C6pos equal ${d6}
variable C6pos equal -7.73298109610886e-07

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C12 equal 0.5*(${C1neg}+${C1pos})
variable C12 equal 0.5*(90.4835518859155+${C1pos})
variable C12 equal 0.5*(90.4835518859155+90.4780936267816)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C22 equal 0.5*(${C2neg}+${C2pos})
variable C22 equal 0.5*(220.429263469278+${C2pos})
variable C22 equal 0.5*(220.429263469278+220.419478734555)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C32 equal 0.5*(${C3neg}+${C3pos})
variable C32 equal 0.5*(90.4835523971465+${C3pos})
variable C32 equal 0.5*(90.4835523971465+90.4780933617405)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C42 equal 0.5*(${C4neg}+${C4pos})
variable C42 equal 0.5*(4.77442966567199e-07+${C4pos})
variable C42 equal 0.5*(4.77442966567199e-07+-6.87823479920736e-07)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C52 equal 0.5*(${C5neg}+${C5pos})
variable C52 equal 0.5*(-1.26321069605849e-07+${C5pos})
variable C52 equal 0.5*(-1.26321069605849e-07+-1.57970896829168e-07)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C62 equal 0.5*(${C6neg}+${C6pos})
variable C62 equal 0.5*(4.12017933569324e-07+${C6pos})
variable C62 equal 0.5*(4.12017933569324e-07+-7.73298109610886e-07)

# Delete dir to make sure it is not reused

variable dir delete

# uzz Perturbation

variable dir equal 3
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
#
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
variable len0 equal ${lz0}
variable len0 equal 11.7245574973302
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  96 atoms
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1.0e-5*${len0}
variable delta equal -1.0e-5*11.7245574973302
variable deltaxy equal -${up}*xy
variable deltaxy equal -1.0e-5*xy
variable deltaxz equal -${up}*xz
variable deltaxz equal -1.0e-5*xz
variable deltayz equal -${up}*yz
variable deltayz equal -1.0e-5*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
change_box all z delta 0 ${delta} remap units box
change_box all z delta 0 -0.000117245574973302 remap units box
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6122) with tilt (0 0 0)
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 4.897 | 4.897 | 4.897 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     963            0   -695.27305    13.745862    6.2402065    7.8078003     27.18958    1.1942778    1.3523327   0.50602128    11.724557    11.724557     11.72444    1611.7031 
    1000            0   -695.27305    13.380357    9.0494053    9.0487294    22.042936 0.0029533238 0.00079526603 -0.0010376302    11.724557    11.724557     11.72444    1611.7031 
    1062            0   -695.27305    13.379879    9.0483552    9.0483552    22.042926 6.7663667e-08 9.631867e-09 6.0439987e-08    11.724557    11.724557     11.72444    1611.7031 
Loop time of 0.047699 on 1 procs for 99 steps with 96 atoms

99.4% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
          -695.2730503     -695.273050566     -695.273050566
  Force two-norm initial, final = 0.00700574 8.96261e-11
  Force max component initial, final = 0.00110295 1.58368e-11
  Final line search alpha, max atom move = 1 1.58368e-11
  Iterations, force evaluations = 99 198

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.046378   | 0.046378   | 0.046378   |   0.0 | 97.23
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.00066257 | 0.00066257 | 0.00066257 |   0.0 |  1.39
Output  | 3.4094e-05 | 3.4094e-05 | 3.4094e-05 |   0.0 |  0.07
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0006239  |            |       |  1.31

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7056 ave 7056 max 7056 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7056
Ave neighs/atom = 73.5
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 9.04835519497473
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 9.04835523132666
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 22.0429263237572
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 6.76636669502682e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 9.63186699063066e-09
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 6.04399874394199e-08

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 90.4835519904609
variable C2neg equal ${d2}
variable C2neg equal 90.4835523075674
variable C3neg equal ${d3}
variable C3neg equal 220.429263290669
variable C4neg equal ${d4}
variable C4neg equal 6.6630137240604e-07
variable C5neg equal ${d5}
variable C5neg equal 1.45250077976713e-07
variable C6neg equal ${d6}
variable C6neg equal 7.41663703143704e-07

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  96 atoms
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1.0e-5*${len0}
variable delta equal 1.0e-5*11.7245574973302
variable deltaxy equal ${up}*xy
variable deltaxy equal 1.0e-5*xy
variable deltaxz equal ${up}*xz
variable deltaxz equal 1.0e-5*xz
variable deltayz equal ${up}*yz
variable deltayz equal 1.0e-5*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
change_box all z delta 0 ${delta} remap units box
change_box all z delta 0 0.000117245574973302 remap units box
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6124) with tilt (0 0 0)
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 4.897 | 4.897 | 4.897 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     963            0   -695.27305   -13.730018   -7.5979922   -6.0305237   -27.561537    1.1942878    1.3519199   0.50593946    11.724557    11.724557    11.724675    1611.7353 
    1000            0   -695.27305   -13.379915   -9.0488374   -9.0488778   -22.042031  0.002852617  0.000936079 -0.0011118304    11.724557    11.724557    11.724675    1611.7353 
    1062            0   -695.27305   -13.379189   -9.0478094   -9.0478094   -22.041948 6.4730388e-08 1.0283263e-08 6.2323793e-08    11.724557    11.724557    11.724675    1611.7353 
Loop time of 0.0477669 on 1 procs for 99 steps with 96 atoms

99.3% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
        -695.273050297     -695.273050566     -695.273050566
  Force two-norm initial, final = 0.00693785 9.1238e-11
  Force max component initial, final = 0.00131596 1.56894e-11
  Final line search alpha, max atom move = 1 1.56894e-11
  Iterations, force evaluations = 99 198

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.046461   | 0.046461   | 0.046461   |   0.0 | 97.27
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.00064874 | 0.00064874 | 0.00064874 |   0.0 |  1.36
Output  | 3.0041e-05 | 3.0041e-05 | 3.0041e-05 |   0.0 |  0.06
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0006268  |            |       |  1.31

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7056 ave 7056 max 7056 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7056
Ave neighs/atom = 73.5
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -695.27305056585
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal -13.3791888606916
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal -9.04780936770152
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal -9.04780935577119
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal -22.0419478586021
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 6.47303875180274e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 1.02832625552493e-08
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 6.23237932954833e-08

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal 90.4780936363016
variable C2pos equal ${d2}
variable C2pos equal 90.4780935634111
variable C3pos equal ${d3}
variable C3pos equal 220.419478532924
variable C4pos equal ${d4}
variable C4pos equal -6.85139430966674e-07
variable C5pos equal ${d5}
variable C5pos equal -1.517640336229e-07
variable C6pos equal ${d6}
variable C6pos equal -7.12330908821296e-07

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C13 equal 0.5*(${C1neg}+${C1pos})
variable C13 equal 0.5*(90.4835519904609+${C1pos})
variable C13 equal 0.5*(90.4835519904609+90.4780936363016)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C23 equal 0.5*(${C2neg}+${C2pos})
variable C23 equal 0.5*(90.4835523075674+${C2pos})
variable C23 equal 0.5*(90.4835523075674+90.4780935634111)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C33 equal 0.5*(${C3neg}+${C3pos})
variable C33 equal 0.5*(220.429263290669+${C3pos})
variable C33 equal 0.5*(220.429263290669+220.419478532924)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C43 equal 0.5*(${C4neg}+${C4pos})
variable C43 equal 0.5*(6.6630137240604e-07+${C4pos})
variable C43 equal 0.5*(6.6630137240604e-07+-6.85139430966674e-07)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C53 equal 0.5*(${C5neg}+${C5pos})
variable C53 equal 0.5*(1.45250077976713e-07+${C5pos})
variable C53 equal 0.5*(1.45250077976713e-07+-1.517640336229e-07)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C63 equal 0.5*(${C6neg}+${C6pos})
variable C63 equal 0.5*(7.41663703143704e-07+${C6pos})
variable C63 equal 0.5*(7.41663703143704e-07+-7.12330908821296e-07)

# Delete dir to make sure it is not reused

variable dir delete

# uyz Perturbation

variable dir equal 4
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
#
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
variable len0 equal ${lz0}
variable len0 equal 11.7245574973302
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  96 atoms
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1.0e-5*${len0}
variable delta equal -1.0e-5*11.7245574973302
variable deltaxy equal -${up}*xy
variable deltaxy equal -1.0e-5*xy
variable deltaxz equal -${up}*xz
variable deltaxz equal -1.0e-5*xz
variable deltayz equal -${up}*yz
variable deltayz equal -1.0e-5*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
change_box all yz delta ${delta} remap units box
change_box all yz delta -0.000117245574973302 remap units box
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 -0.000117246)
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 4.897 | 4.897 | 4.897 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     963            0   -695.27305 0.0075638057  -0.67910037   0.88832594  -0.18653415     1.194255    1.3521128    15.156724    11.724557    11.724557    11.724557    1611.7192 
    1000            0   -695.27305 -0.00013573147 -0.0010102558 -0.00042944633 0.0010325077 0.00031190304 3.7596559e-05    6.4472964    11.724557    11.724557    11.724557    1611.7192 
    1062            0   -695.27305 -5.8541288e-05 7.855889e-05 -0.00015908625 -9.5096498e-05 1.1747025e-08 1.0138567e-08    6.4463169    11.724557    11.724557    11.724557    1611.7192 
Loop time of 0.0617979 on 1 procs for 99 steps with 96 atoms

92.2% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
        -695.273050357     -695.273050644     -695.273050644
  Force two-norm initial, final = 0.00681522 8.99381e-11
  Force max component initial, final = 0.00130086 1.968e-11
  Final line search alpha, max atom move = 1 1.968e-11
  Iterations, force evaluations = 99 198

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.059993   | 0.059993   | 0.059993   |   0.0 | 97.08
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.00093174 | 0.00093174 | 0.00093174 |   0.0 |  1.51
Output  | 4.0054e-05 | 4.0054e-05 | 4.0054e-05 |   0.0 |  0.06
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0008333  |            |       |  1.35

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7056 ave 7056 max 7056 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7056
Ave neighs/atom = 73.5
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 7.85588900512196e-05
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal -0.000159086254802573
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal -9.50964983656394e-05
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 1.17470254695912e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 1.01385665621162e-08
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 6.4463168560532

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal 0.000785629614145445
variable C2neg equal ${d2}
variable C2neg equal -0.00159086824727219
variable C3neg equal ${d3}
variable C3neg equal -0.000950911887074784
variable C4neg equal ${d4}
variable C4neg equal 64.4631686224335
variable C5neg equal ${d5}
variable C5neg equal 1.50317073691569e-07
variable C6neg equal ${d6}
variable C6neg equal 1.82497288336934e-07

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  96 atoms
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1.0e-5*${len0}
variable delta equal 1.0e-5*11.7245574973302
variable deltaxy equal ${up}*xy
variable deltaxy equal 1.0e-5*xy
variable deltaxz equal ${up}*xz
variable deltaxz equal 1.0e-5*xz
variable deltayz equal ${up}*yz
variable deltayz equal 1.0e-5*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
change_box all yz delta ${delta} remap units box
change_box all yz delta 0.000117245574973302 remap units box
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0.000117246)
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 4.897 | 4.897 | 4.897 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     963            0   -695.27305 0.0075573132  -0.67918737   0.88847702  -0.18661771    1.1943101    1.3521354   -14.144757    11.724557    11.724557    11.724557    1611.7192 
    1000            0   -695.27305 -0.00015086135 -0.0010115751 -0.00047415641 0.0010331475 0.00049504845 -1.7426205e-05   -6.4464293    11.724557    11.724557    11.724557    1611.7192 
    1062            0   -695.27305 -5.8540688e-05 7.8561998e-05 -0.00015908557 -9.5098495e-05 2.5085514e-08 5.6153691e-09   -6.4463169    11.724557    11.724557    11.724557    1611.7192 
Loop time of 0.0479739 on 1 procs for 99 steps with 96 atoms

99.1% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
        -695.273050368     -695.273050644     -695.273050644
  Force two-norm initial, final = 0.00688338 8.7626e-11
  Force max component initial, final = 0.00100224 1.88175e-11
  Final line search alpha, max atom move = 1 1.88175e-11
  Iterations, force evaluations = 99 198

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.046668   | 0.046668   | 0.046668   |   0.0 | 97.28
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.00066137 | 0.00066137 | 0.00066137 |   0.0 |  1.38
Output  | 3.0041e-05 | 3.0041e-05 | 3.0041e-05 |   0.0 |  0.06
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0006149  |            |       |  1.28

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7056 ave 7056 max 7056 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7056
Ave neighs/atom = 73.5
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -695.273050644294
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal -5.85406875410191e-05
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal 7.85619979284554e-05
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal -0.000159085565242311
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal -9.50984953092014e-05
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 2.5085513643024e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 5.61536909649559e-09
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal -6.44631687455036

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal -0.000785660692917803
variable C2pos equal ${d2}
variable C2pos equal 0.00159086135166957
variable C3pos equal ${d3}
variable C3pos equal 0.000950931856510404
variable C4pos equal ${d4}
variable C4pos equal 64.4631686836021
variable C5pos equal ${d5}
variable C5pos equal -1.05085099035362e-07
variable C6pos equal ${d6}
variable C6pos equal -3.15882170071262e-07

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C14 equal 0.5*(${C1neg}+${C1pos})
variable C14 equal 0.5*(0.000785629614145445+${C1pos})
variable C14 equal 0.5*(0.000785629614145445+-0.000785660692917803)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C24 equal 0.5*(${C2neg}+${C2pos})
variable C24 equal 0.5*(-0.00159086824727219+${C2pos})
variable C24 equal 0.5*(-0.00159086824727219+0.00159086135166957)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C34 equal 0.5*(${C3neg}+${C3pos})
variable C34 equal 0.5*(-0.000950911887074784+${C3pos})
variable C34 equal 0.5*(-0.000950911887074784+0.000950931856510404)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C44 equal 0.5*(${C4neg}+${C4pos})
variable C44 equal 0.5*(64.4631686224335+${C4pos})
variable C44 equal 0.5*(64.4631686224335+64.4631686836021)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C54 equal 0.5*(${C5neg}+${C5pos})
variable C54 equal 0.5*(1.50317073691569e-07+${C5pos})
variable C54 equal 0.5*(1.50317073691569e-07+-1.05085099035362e-07)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C64 equal 0.5*(${C6neg}+${C6pos})
variable C64 equal 0.5*(1.82497288336934e-07+${C6pos})
variable C64 equal 0.5*(1.82497288336934e-07+-3.15882170071262e-07)

# Delete dir to make sure it is not reused

variable dir delete

# uxz Perturbation

variable dir equal 5
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
#
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
variable len0 equal ${lz0}
variable len0 equal 11.7245574973302
if "${dir} == 6" then    "variable len0 equal ${ly0}"

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  96 atoms
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1.0e-5*${len0}
variable delta equal -1.0e-5*11.7245574973302
variable deltaxy equal -${up}*xy
variable deltaxy equal -1.0e-5*xy
variable deltaxz equal -${up}*xz
variable deltaxz equal -1.0e-5*xz
variable deltayz equal -${up}*yz
variable deltayz equal -1.0e-5*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
change_box all xz delta ${delta} remap units box
change_box all xz delta -0.000117245574973302 remap units box
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 -0.000117246 0)
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 4.897 | 4.897 | 4.897 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     963            0   -695.27305 0.0076270735  -0.67910977   0.88836172  -0.18637073    1.1943165     16.00279   0.50597147    11.724557    11.724557    11.724557    1611.7192 
    1000            0   -695.27305 -0.00014308276 -0.0012499782 -0.00018849847 0.0010092284 0.00038859636    6.4471141 -0.00035973624    11.724557    11.724557    11.724557    1611.7192 
    1062            0   -695.27305 -5.8541327e-05 -0.00015910604 7.8581754e-05 -9.5099697e-05 9.7699476e-09    6.4463169 6.9724166e-09    11.724557    11.724557    11.724557    1611.7192 
Loop time of 0.0472651 on 1 procs for 99 steps with 96 atoms

99.4% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
        -695.273050349     -695.273050644     -695.273050644
  Force two-norm initial, final = 0.00710138 8.51328e-11
  Force max component initial, final = 0.00118688 1.79539e-11
  Final line search alpha, max atom move = 1 1.79539e-11
  Iterations, force evaluations = 99 198

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.045971   | 0.045971   | 0.045971   |   0.0 | 97.26
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.00065517 | 0.00065517 | 0.00065517 |   0.0 |  1.39
Output  | 3.1948e-05 | 3.1948e-05 | 3.1948e-05 |   0.0 |  0.07
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.000607   |            |       |  1.28

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7056 ave 7056 max 7056 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7056
Ave neighs/atom = 73.5
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal -0.000159106036176303
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 7.8581753697515e-05
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal -9.50996970732362e-05
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 9.7699476002e-09
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 6.44631686421049
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 6.97241662814869e-09

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal -0.00159101964812978
variable C2neg equal ${d2}
variable C2neg equal 0.000785811837728685
variable C3neg equal ${d3}
variable C3neg equal -0.000950943874150752
variable C4neg equal ${d4}
variable C4neg equal 1.31625664293327e-07
variable C5neg equal ${d5}
variable C5neg equal 64.4631686910363
variable C6neg equal ${d6}
variable C6neg equal 1.62726509643022e-07

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  96 atoms
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1.0e-5*${len0}
variable delta equal 1.0e-5*11.7245574973302
variable deltaxy equal ${up}*xy
variable deltaxy equal 1.0e-5*xy
variable deltaxz equal ${up}*xz
variable deltaxz equal 1.0e-5*xz
variable deltayz equal ${up}*yz
variable deltayz equal 1.0e-5*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
change_box all xz delta ${delta} remap units box
change_box all xz delta 0.000117245574973302 remap units box
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0.000117246 0)
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 4.897 | 4.897 | 4.897 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     963            0   -695.27305 0.0074940443  -0.67915273    0.8884192  -0.18678434    1.1942531   -13.298544    0.5059939    11.724557    11.724557    11.724557    1611.7192 
    1000            0   -695.27305 -0.00014398884 -0.0012266453 -0.00022343038 0.0010181092 0.00035781451   -6.4467815 -0.00036120837    11.724557    11.724557    11.724557    1611.7192 
    1062            0   -695.27305 -5.8540359e-05 -0.00015910564 7.8580323e-05 -9.5095755e-05 1.5051352e-08   -6.4463168 6.6483851e-10    11.724557    11.724557    11.724557    1611.7192 
Loop time of 0.04739 on 1 procs for 99 steps with 96 atoms

99.5% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
        -695.273050376     -695.273050644     -695.273050644
  Force two-norm initial, final = 0.00658773 8.65771e-11
  Force max component initial, final = 0.00110284 1.90368e-11
  Final line search alpha, max atom move = 1 1.90368e-11
  Iterations, force evaluations = 99 198

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.046073   | 0.046073   | 0.046073   |   0.0 | 97.22
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.00068116 | 0.00068116 | 0.00068116 |   0.0 |  1.44
Output  | 2.8849e-05 | 2.8849e-05 | 2.8849e-05 |   0.0 |  0.06
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0006065  |            |       |  1.28

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7056 ave 7056 max 7056 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7056
Ave neighs/atom = 73.5
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -695.273050644294
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal -5.85403588741723e-05
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal -0.00015910564460143
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal 7.85803233676508e-05
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal -9.50957553887378e-05
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 1.50513523317979e-08
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal -6.44631684971295
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 6.64838510953016e-10

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal 0.00159101573238105
variable C2pos equal ${d2}
variable C2pos equal -0.000785797534430043
variable C3pos equal ${d3}
variable C3pos equal 0.000950904457305768
variable C4pos equal ${d4}
variable C4pos equal -6.85498831213708e-08
variable C5pos equal ${d5}
variable C5pos equal 64.4631684481981
variable C6pos equal ${d6}
variable C6pos equal -2.15540556959001e-07

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C15 equal 0.5*(${C1neg}+${C1pos})
variable C15 equal 0.5*(-0.00159101964812978+${C1pos})
variable C15 equal 0.5*(-0.00159101964812978+0.00159101573238105)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C25 equal 0.5*(${C2neg}+${C2pos})
variable C25 equal 0.5*(0.000785811837728685+${C2pos})
variable C25 equal 0.5*(0.000785811837728685+-0.000785797534430043)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C35 equal 0.5*(${C3neg}+${C3pos})
variable C35 equal 0.5*(-0.000950943874150752+${C3pos})
variable C35 equal 0.5*(-0.000950943874150752+0.000950904457305768)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C45 equal 0.5*(${C4neg}+${C4pos})
variable C45 equal 0.5*(1.31625664293327e-07+${C4pos})
variable C45 equal 0.5*(1.31625664293327e-07+-6.85498831213708e-08)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C55 equal 0.5*(${C5neg}+${C5pos})
variable C55 equal 0.5*(64.4631686910363+${C5pos})
variable C55 equal 0.5*(64.4631686910363+64.4631684481981)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C65 equal 0.5*(${C6neg}+${C6pos})
variable C65 equal 0.5*(1.62726509643022e-07+${C6pos})
variable C65 equal 0.5*(1.62726509643022e-07+-2.15540556959001e-07)

# Delete dir to make sure it is not reused

variable dir delete

# uxy Perturbation

variable dir equal 6
include displace.mod
# NOTE: This script should not need to be
# modified. See in.elastic for more info.
#
# Find which reference length to use

if "${dir} == 1" then    "variable len0 equal ${lx0}"
if "${dir} == 2" then    "variable len0 equal ${ly0}"
if "${dir} == 3" then    "variable len0 equal ${lz0}"
if "${dir} == 4" then    "variable len0 equal ${lz0}"
if "${dir} == 5" then    "variable len0 equal ${lz0}"
if "${dir} == 6" then    "variable len0 equal ${ly0}"
variable len0 equal ${ly0}
variable len0 equal 11.7245574973302

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  96 atoms
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Negative deformation

variable delta equal -${up}*${len0}
variable delta equal -1.0e-5*${len0}
variable delta equal -1.0e-5*11.7245574973302
variable deltaxy equal -${up}*xy
variable deltaxy equal -1.0e-5*xy
variable deltaxz equal -${up}*xz
variable deltaxz equal -1.0e-5*xz
variable deltayz equal -${up}*yz
variable deltayz equal -1.0e-5*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"
change_box all xy delta ${delta} remap units box
change_box all xy delta -0.000117245574973302 remap units box
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (-0.000117246 0 0)

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 4.897 | 4.897 | 4.897 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     963            0   -695.27305 0.0076089146  -0.67904703   0.88867463  -0.18680086    15.844942    1.3521575   0.50596522    11.724557    11.724557    11.724557    1611.7192 
    1000            0   -695.27305 -0.00013612201 -0.0012331735 -0.00038010444 0.0012049119    6.4473699 -2.0541319e-05 -0.00051048355    11.724557    11.724557    11.724557    1611.7192 
    1062            0   -695.27305 -5.8541812e-05 -0.00015911253 -9.5130817e-05 7.8617908e-05    6.4463169 6.9662362e-09 6.4311869e-09    11.724557    11.724557    11.724557    1611.7192 
Loop time of 0.0491149 on 1 procs for 99 steps with 96 atoms

99.3% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
         -695.27305035     -695.273050644     -695.273050644
  Force two-norm initial, final = 0.00709679 7.98782e-11
  Force max component initial, final = 0.00130714 1.84103e-11
  Final line search alpha, max atom move = 1 1.84103e-11
  Iterations, force evaluations = 99 198

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.04778    | 0.04778    | 0.04778    |   0.0 | 97.28
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.00068188 | 0.00068188 | 0.00068188 |   0.0 |  1.39
Output  | 3.0994e-05 | 3.0994e-05 | 3.0994e-05 |   0.0 |  0.06
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.0006225  |            |       |  1.27

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7056 ave 7056 max 7056 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7056
Ave neighs/atom = 73.5
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal -0.000159112527180982
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal -9.51308172324537e-05
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 7.86179082646866e-05
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal 6.44631685318216
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 6.96623619046387e-09
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 6.43118687089212e-09

# Compute elastic constant from pressure tensor

variable C1neg equal ${d1}
variable C1neg equal -0.00159108455817657
variable C2neg equal ${d2}
variable C2neg equal -0.000951313871571002
variable C3neg equal ${d3}
variable C3neg equal 0.000786232179228476
variable C4neg equal ${d4}
variable C4neg equal 1.26213366720762e-07
variable C5neg equal ${d5}
variable C5neg equal 1.18593769975045e-07
variable C6neg equal ${d6}
variable C6neg equal 64.4631685968486

# Reset box and simulation parameters

clear
box tilt large
read_restart restart.equil
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0 0 0)
  1 by 1 by 1 MPI processor grid
  96 atoms
include potential.mod
# NOTE: This script can be modified for different pair styles
# See in.elastic for more info.

# Choose potential
pair_style     rebo
pair_coeff     * * CH.airebo C
Reading potential file CH.airebo with DATE: 2011-10-25

#pair_style     lcbop
#pair_coeff     C.lcbop
#pair_style     tersoff
#pair_coeff     BNC.tersoff


# Setup neighbor style
neighbor 1.0 nsq
neigh_modify once no every 1 delay 0 check yes

# Setup minimization style
min_style	     cg
min_modify	     dmax ${dmax} line quadratic
min_modify	     dmax 0.01 line quadratic

# Setup output
thermo		500
thermo_style custom step temp pe press pxx pyy pzz pxy pxz pyz lx ly lz vol
thermo_modify norm no


# Output
dump            1 all xtc 100 traj.xtc
dump            2 all xyz 2000 relaxed.xyz
#dump            4 all atom 10 dump.atom

# Positive deformation

variable delta equal ${up}*${len0}
variable delta equal 1.0e-5*${len0}
variable delta equal 1.0e-5*11.7245574973302
variable deltaxy equal ${up}*xy
variable deltaxy equal 1.0e-5*xy
variable deltaxz equal ${up}*xz
variable deltaxz equal 1.0e-5*xz
variable deltayz equal ${up}*yz
variable deltayz equal 1.0e-5*yz
if "${dir} == 1" then    "change_box all x delta 0 ${delta} xy delta ${deltaxy} xz delta ${deltaxz} remap units box"
if "${dir} == 2" then    "change_box all y delta 0 ${delta} yz delta ${deltayz} remap units box"
if "${dir} == 3" then    "change_box all z delta 0 ${delta} remap units box"
if "${dir} == 4" then    "change_box all yz delta ${delta} remap units box"
if "${dir} == 5" then    "change_box all xz delta ${delta} remap units box"
if "${dir} == 6" then    "change_box all xy delta ${delta} remap units box"
change_box all xy delta ${delta} remap units box
change_box all xy delta 0.000117245574973302 remap units box
  triclinic box = (-0.112279 -0.112279 -0.112279) to (11.6123 11.6123 11.6123) with tilt (0.000117246 0 0)

# Relax atoms positions

minimize ${etol} ${ftol} ${maxiter} ${maxeval}
minimize 0 ${ftol} ${maxiter} ${maxeval}
minimize 0 1e-10 ${maxiter} ${maxeval}
minimize 0 1e-10 10000000 ${maxeval}
minimize 0 1e-10 10000000 10000000
Neighbor list info ...
  update every 1 steps, delay 0 steps, check yes
  max neighbors/atom: 2000, page size: 100000
  master list distance cutoff = 7
  ghost atom cutoff = 7
  1 neighbor lists, perpetual/occasional/extra = 1 0 0
  (1) pair rebo, perpetual
      attributes: full, newton on, ghost
      pair build: full/nsq/ghost
      stencil: none
      bin: none
Per MPI rank memory allocation (min/avg/max) = 4.897 | 4.897 | 4.897 Mbytes
Step Temp PotEng Press Pxx Pyy Pzz Pxy Pxz Pyz Lx Ly Lz Volume 
     963            0   -695.27305  0.007512202  -0.67920923   0.88851283    -0.186767   -13.456377     1.352095    0.5059955    11.724557    11.724557    11.724557    1611.7192 
    1000            0   -695.27305 -0.0001513945 -0.0012227864 -0.00037939921 0.0011480021   -6.4467644 1.239281e-05 -0.00015527471    11.724557    11.724557    11.724557    1611.7192 
    1062            0   -695.27305 -5.854077e-05 -0.00015910887 -9.5124474e-05 7.8611036e-05   -6.4463169 8.8389088e-09 1.3015119e-08    11.724557    11.724557    11.724557    1611.7192 
Loop time of 0.0613959 on 1 procs for 99 steps with 96 atoms

92.8% CPU use with 1 MPI tasks x no OpenMP threads

Minimization stats:
  Stopping criterion = force tolerance
  Energy initial, next-to-last, final = 
        -695.273050375     -695.273050644     -695.273050644
  Force two-norm initial, final = 0.00659268 8.31532e-11
  Force max component initial, final = 0.000982581 1.85074e-11
  Final line search alpha, max atom move = 1 1.85074e-11
  Iterations, force evaluations = 99 198

MPI task timing breakdown:
Section |  min time  |  avg time  |  max time  |%varavg| %total
---------------------------------------------------------------
Pair    | 0.059599   | 0.059599   | 0.059599   |   0.0 | 97.07
Neigh   | 0          | 0          | 0          |   0.0 |  0.00
Comm    | 0.0008471  | 0.0008471  | 0.0008471  |   0.0 |  1.38
Output  | 5.4121e-05 | 5.4121e-05 | 5.4121e-05 |   0.0 |  0.09
Modify  | 0          | 0          | 0          |   0.0 |  0.00
Other   |            | 0.000896   |            |       |  1.46

Nlocal:    96 ave 96 max 96 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Nghost:    960 ave 960 max 960 min
Histogram: 1 0 0 0 0 0 0 0 0 0
Neighs:    0 ave 0 max 0 min
Histogram: 1 0 0 0 0 0 0 0 0 0
FullNghs:  7056 ave 7056 max 7056 min
Histogram: 1 0 0 0 0 0 0 0 0 0

Total # of neighbors = 7056
Ave neighs/atom = 73.5
Neighbor list builds = 0
Dangerous builds = 0

# Obtain new stress tensor

variable tmp equal pe
variable e1 equal ${tmp}
variable e1 equal -695.273050644294
variable tmp equal press
variable p1 equal ${tmp}
variable p1 equal -5.854076983649e-05
variable tmp equal pxx
variable pxx1 equal ${tmp}
variable pxx1 equal -0.000159108871010631
variable tmp equal pyy
variable pyy1 equal ${tmp}
variable pyy1 equal -9.51244743375497e-05
variable tmp equal pzz
variable pzz1 equal ${tmp}
variable pzz1 equal 7.86110358387109e-05
variable tmp equal pxy
variable pxy1 equal ${tmp}
variable pxy1 equal -6.44631686138007
variable tmp equal pxz
variable pxz1 equal ${tmp}
variable pxz1 equal 8.838908808965e-09
variable tmp equal pyz
variable pyz1 equal ${tmp}
variable pyz1 equal 1.30151188445663e-08

# Compute elastic constant from pressure tensor

variable C1pos equal ${d1}
variable C1pos equal 0.00159104799647306
variable C2pos equal ${d2}
variable C2pos equal 0.000951250442621962
variable C3pos equal ${d3}
variable C3pos equal -0.000786163454968719
variable C4pos equal ${d4}
variable C4pos equal -1.92052686457504e-07
variable C5pos equal ${d5}
variable C5pos equal -1.37320496160057e-07
variable C6pos equal ${d6}
variable C6pos equal 64.4631685487737

# Combine positive and negative

variable C1${dir} equal 0.5*(${C1neg}+${C1pos})
variable C16 equal 0.5*(${C1neg}+${C1pos})
variable C16 equal 0.5*(-0.00159108455817657+${C1pos})
variable C16 equal 0.5*(-0.00159108455817657+0.00159104799647306)
variable C2${dir} equal 0.5*(${C2neg}+${C2pos})
variable C26 equal 0.5*(${C2neg}+${C2pos})
variable C26 equal 0.5*(-0.000951313871571002+${C2pos})
variable C26 equal 0.5*(-0.000951313871571002+0.000951250442621962)
variable C3${dir} equal 0.5*(${C3neg}+${C3pos})
variable C36 equal 0.5*(${C3neg}+${C3pos})
variable C36 equal 0.5*(0.000786232179228476+${C3pos})
variable C36 equal 0.5*(0.000786232179228476+-0.000786163454968719)
variable C4${dir} equal 0.5*(${C4neg}+${C4pos})
variable C46 equal 0.5*(${C4neg}+${C4pos})
variable C46 equal 0.5*(1.26213366720762e-07+${C4pos})
variable C46 equal 0.5*(1.26213366720762e-07+-1.92052686457504e-07)
variable C5${dir} equal 0.5*(${C5neg}+${C5pos})
variable C56 equal 0.5*(${C5neg}+${C5pos})
variable C56 equal 0.5*(1.18593769975045e-07+${C5pos})
variable C56 equal 0.5*(1.18593769975045e-07+-1.37320496160057e-07)
variable C6${dir} equal 0.5*(${C6neg}+${C6pos})
variable C66 equal 0.5*(${C6neg}+${C6pos})
variable C66 equal 0.5*(64.4631685968486+${C6pos})
variable C66 equal 0.5*(64.4631685968486+64.4631685487737)

# Delete dir to make sure it is not reused

variable dir delete

# Output final values

variable C11all equal ${C11}
variable C11all equal 220.424371048035
variable C22all equal ${C22}
variable C22all equal 220.424371101917
variable C33all equal ${C33}
variable C33all equal 220.424370911797

variable C12all equal 0.5*(${C12}+${C21})
variable C12all equal 0.5*(90.4808227563485+${C21})
variable C12all equal 0.5*(90.4808227563485+90.480822844229)
variable C13all equal 0.5*(${C13}+${C31})
variable C13all equal 0.5*(90.4808228133813+${C31})
variable C13all equal 0.5*(90.4808228133813+90.4808228171659)
variable C23all equal 0.5*(${C23}+${C32})
variable C23all equal 0.5*(90.4808229354892+${C32})
variable C23all equal 0.5*(90.4808229354892+90.4808228794435)

variable C44all equal ${C44}
variable C44all equal 64.4631686530178
variable C55all equal ${C55}
variable C55all equal 64.4631685696172
variable C66all equal ${C66}
variable C66all equal 64.4631685728112

variable C14all equal 0.5*(${C14}+${C41})
variable C14all equal 0.5*(-1.55393861789701e-08+${C41})
variable C14all equal 0.5*(-1.55393861789701e-08+1.0298908739393e-07)
variable C15all equal 0.5*(${C15}+${C51})
variable C15all equal 0.5*(-1.95787436501997e-09+${C51})
variable C15all equal 0.5*(-1.95787436501997e-09+8.8283177734428e-08)
variable C16all equal 0.5*(${C16}+${C61})
variable C16all equal 0.5*(-1.82808517550049e-08+${C61})
variable C16all equal 0.5*(-1.82808517550049e-08+1.90004210988e-07)

variable C24all equal 0.5*(${C24}+${C42})
variable C24all equal 0.5*(-3.44780130996907e-09+${C42})
variable C24all equal 0.5*(-3.44780130996907e-09+-1.05190256676769e-07)
variable C25all equal 0.5*(${C25}+${C52})
variable C25all equal 0.5*(7.15164932097801e-09+${C52})
variable C25all equal 0.5*(7.15164932097801e-09+-1.42145983217509e-07)
variable C26all equal 0.5*(${C26}+${C62})
variable C26all equal 0.5*(-3.17144745199663e-08+${C62})
variable C26all equal 0.5*(-3.17144745199663e-08+-1.80640088020781e-07)

variable C34all equal 0.5*(${C34}+${C43})
variable C34all equal 0.5*(9.98471780998484e-09+${C43})
variable C34all equal 0.5*(9.98471780998484e-09+-9.41902928031699e-09)
variable C35all equal 0.5*(${C35}+${C53})
variable C35all equal 0.5*(-1.97084224919748e-08+${C53})
variable C35all equal 0.5*(-1.97084224919748e-08+-3.2569778230935e-09)
variable C36all equal 0.5*(${C36}+${C63})
variable C36all equal 0.5*(3.4362129878486e-08+${C63})
variable C36all equal 0.5*(3.4362129878486e-08+1.4666397161204e-08)

variable C45all equal 0.5*(${C45}+${C54})
variable C45all equal 0.5*(3.15378905859781e-08+${C54})
variable C45all equal 0.5*(3.15378905859781e-08+2.26159873281035e-08)
variable C46all equal 0.5*(${C46}+${C64})
variable C46all equal 0.5*(-3.2919659868371e-08+${C64})
variable C46all equal 0.5*(-3.2919659868371e-08+-6.6692440867164e-08)
variable C56all equal 0.5*(${C56}+${C65})
variable C56all equal 0.5*(-9.363363092506e-09+${C65})
variable C56all equal 0.5*(-9.363363092506e-09+-2.64070236579895e-08)

# Average moduli for cubic crystals

variable C11cubic equal (${C11all}+${C22all}+${C33all})/3.0
variable C11cubic equal (220.424371048035+${C22all}+${C33all})/3.0
variable C11cubic equal (220.424371048035+220.424371101917+${C33all})/3.0
variable C11cubic equal (220.424371048035+220.424371101917+220.424370911797)/3.0
variable C12cubic equal (${C12all}+${C13all}+${C23all})/3.0
variable C12cubic equal (90.4808228002887+${C13all}+${C23all})/3.0
variable C12cubic equal (90.4808228002887+90.4808228152736+${C23all})/3.0
variable C12cubic equal (90.4808228002887+90.4808228152736+90.4808229074663)/3.0
variable C44cubic equal (${C44all}+${C55all}+${C66all})/3.0
variable C44cubic equal (64.4631686530178+${C55all}+${C66all})/3.0
variable C44cubic equal (64.4631686530178+64.4631685696172+${C66all})/3.0
variable C44cubic equal (64.4631686530178+64.4631685696172+64.4631685728112)/3.0

variable bulkmodulus equal (${C11cubic}+2*${C12cubic})/3.0
variable bulkmodulus equal (220.424371020583+2*${C12cubic})/3.0
variable bulkmodulus equal (220.424371020583+2*90.4808228410095)/3.0
variable shearmodulus1 equal ${C44cubic}
variable shearmodulus1 equal 64.4631685984821
variable shearmodulus2 equal (${C11cubic}-${C12cubic})/2.0
variable shearmodulus2 equal (220.424371020583-${C12cubic})/2.0
variable shearmodulus2 equal (220.424371020583-90.4808228410095)/2.0
variable poissonratio equal 1.0/(1.0+${C11cubic}/${C12cubic})
variable poissonratio equal 1.0/(1.0+220.424371020583/${C12cubic})
variable poissonratio equal 1.0/(1.0+220.424371020583/90.4808228410095)

# For Stillinger-Weber silicon, the analytical results
# are known to be (E. R. Cowley, 1988):
#               C11 = 151.4 GPa
#               C12 = 76.4 GPa
#               C44 = 56.4 GPa

print "========================================="
=========================================
print "Components of the Elastic Constant Tensor"
Components of the Elastic Constant Tensor
print "========================================="
=========================================

print "Elastic Constant C11all = ${C11all} ${cunits}"
Elastic Constant C11all = 220.424371048035 GPa
print "Elastic Constant C22all = ${C22all} ${cunits}"
Elastic Constant C22all = 220.424371101917 GPa
print "Elastic Constant C33all = ${C33all} ${cunits}"
Elastic Constant C33all = 220.424370911797 GPa

print "Elastic Constant C12all = ${C12all} ${cunits}"
Elastic Constant C12all = 90.4808228002887 GPa
print "Elastic Constant C13all = ${C13all} ${cunits}"
Elastic Constant C13all = 90.4808228152736 GPa
print "Elastic Constant C23all = ${C23all} ${cunits}"
Elastic Constant C23all = 90.4808229074663 GPa

print "Elastic Constant C44all = ${C44all} ${cunits}"
Elastic Constant C44all = 64.4631686530178 GPa
print "Elastic Constant C55all = ${C55all} ${cunits}"
Elastic Constant C55all = 64.4631685696172 GPa
print "Elastic Constant C66all = ${C66all} ${cunits}"
Elastic Constant C66all = 64.4631685728112 GPa

print "Elastic Constant C14all = ${C14all} ${cunits}"
Elastic Constant C14all = 4.372485060748e-08 GPa
print "Elastic Constant C15all = ${C15all} ${cunits}"
Elastic Constant C15all = 4.3162651684704e-08 GPa
print "Elastic Constant C16all = ${C16all} ${cunits}"
Elastic Constant C16all = 8.58616796164975e-08 GPa

print "Elastic Constant C24all = ${C24all} ${cunits}"
Elastic Constant C24all = -5.4319028993369e-08 GPa
print "Elastic Constant C25all = ${C25all} ${cunits}"
Elastic Constant C25all = -6.74971669482655e-08 GPa
print "Elastic Constant C26all = ${C26all} ${cunits}"
Elastic Constant C26all = -1.06177281270374e-07 GPa

print "Elastic Constant C34all = ${C34all} ${cunits}"
Elastic Constant C34all = 2.82844264833925e-10 GPa
print "Elastic Constant C35all = ${C35all} ${cunits}"
Elastic Constant C35all = -1.14827001575342e-08 GPa
print "Elastic Constant C36all = ${C36all} ${cunits}"
Elastic Constant C36all = 2.4514263519845e-08 GPa

print "Elastic Constant C45all = ${C45all} ${cunits}"
Elastic Constant C45all = 2.70769389570408e-08 GPa
print "Elastic Constant C46all = ${C46all} ${cunits}"
Elastic Constant C46all = -4.98060503677675e-08 GPa
print "Elastic Constant C56all = ${C56all} ${cunits}"
Elastic Constant C56all = -1.78851933752477e-08 GPa

print "========================================="
=========================================
print "Average properties for a cubic crystal"
Average properties for a cubic crystal
print "========================================="
=========================================

print "Bulk Modulus = ${bulkmodulus} ${cunits}"
Bulk Modulus = 133.795338900867 GPa
print "Shear Modulus 1 = ${shearmodulus1} ${cunits}"
Shear Modulus 1 = 64.4631685984821 GPa
print "Shear Modulus 2 = ${shearmodulus2} ${cunits}"
Shear Modulus 2 = 64.9717740897867 GPa
print "Poisson Ratio = ${poissonratio}"
Poisson Ratio = 0.291023838222817
print "Deformation size: ${up}"
Deformation size: 1.0e-5

print "Lattice_type	lattice_constant	bulk_modulus	poisson	     c11	     c12         c44	" file elastic_constants.out
Lattice_type	lattice_constant	bulk_modulus	poisson	     c11	     c12         c44	
print "${lattype}    ${latconst}    ${bulkmodulus}     ${poissonratio}     ${C11all}     ${C12all}     ${C44all}" append elastic_constants.out
sc    5.0    133.795338900867     0.291023838222817     220.424371048035     90.4808228002887     64.4631686530178
Total wall time: 0:00:01
